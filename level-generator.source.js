const LevelAI={Generate(a=1200,b=[],c=!0){function d(){return 3}const e=5,f=function(a){const b=[];let c=[];for(let d=0;d<a.length;d++)c.push(a[d]),c.length===e&&(b.push(c),c=[]);return 0<c.length&&b.push(c),b}(b);if(!c);else{(a=>{for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}})(f)}const g=5,h=[];for(let m=0;m<a;m+=d())for(let a=0;a<e;a+=g){const b=[];for(let c=0;c<d();c++){b[c]=[];for(let d=0;d<g;d++)try{b[c][d]=f[m+c][a+d]}catch{b[c][d]=[0]}}h.push(b)}h.sort((c,a)=>c[0].reduce((a,b)=>a+b)-a[0].reduce((a,b)=>a+b));const i=[];for(let d=0;d<h.length;d++){const a=h[d];for(let b=0;b<a.length;b++)i.push(a[b])}return function(b){var c="";for(let a=0;a<b.length;a++){for(let d=0;d<b[a].length;d++)c+=b[a][d]+",";c+="\n"}return c}(i).slice(0,-2)},PrepareForLoad(a){return function(a,b,c,d){for(var e=a.split(b),f="",g=0;g<e.length;g++)f+=e[g],g<e.length-1&&(0==(g+1)%d?f+=c:f+=b);return f}(a,",",",\n",5)},RemoveRenderTiles(a,b=["181:0","182:1","183:3","184:2","186:0","187:1","188:3","189:2","589:586"]){return a},Automatic(a){try{return PopupManager.hideMessage(),load(LevelAI.RemoveRenderTiles(LevelAI.Generate(loadedlength-1,generate(!0).replaceAll("\n","").split(","),1==a))),!0}catch(a){return PopupManager.showMessage("LevelAI was unable to generate a level based off of the level loaded in the canvas. We are sorry for the inconvenience.\n\nError Log:\n<textarea>"+JSON.stringify((a=>Object.getOwnPropertyNames(a).reduce((b,c)=>(b[c]=a[c],b),{}))(a))+"</textarea>","LevelAI"),!1}},Popups:{Begin(){PopupManager.showMessage("LevelAI is an experemental alogorithm that tries to put its own twist on your level.\n\n<b style=\"color:#ff5454;\">Please back up your level before using LevelAI, as this action cannot be undone!</b>\n\nLevels generated by LevelAI won't always be possible, so please only use LevelAI's generated levels as insipration for your next level!","LevelAI",["Cancel>PopupManager.hideMessage()~blue","Save Level>LevelAI.Popups.ToExport()~blue","Continue>LevelAI.Popups.Continue()~red"])},ToExport(){PopupManager.hideMessage(),openexport()},Continue(){PopupManager.showMessage("Please confirm your action.\n\n<b style=\"color:#ff5454;\">Please back up your level before using LevelAI, as this action cannot be undone!</b>\n\nIf you want to generate a result that will be the exact same every time you use the AI on that specific level file, chose pseudo random.\n\nAnd if you want a result that is completely random and will (most likely) never repeat a previous generation, chose full random.","Confirm use of LevelAI",["Cancel>PopupManager.hideMessage()~blue","Generate Pseudo Random>LevelAI.Automatic(0)~red","Generate Full Random>LevelAI.Automatic(1)~red"])}}};
